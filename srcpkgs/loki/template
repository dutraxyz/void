# Template file for 'loki'
pkgname=loki
version=3.2.0
revision=2
build_style=go
go_import_path="github.com/grafana/loki/v3"
go_package="${go_import_path}/cmd/loki ${go_import_path}/cmd/logcli
 ${go_import_path}/cmd/loki-canary ${go_import_path}/clients/cmd/promtail"
make_check_args="-skip TestCompactor_TableLocking/first_table_locked_-_applying_retention/2"
hostmakedepends="go"
short_desc="Like Prometheus, but for logs"
maintainer="Michael Aldridge <maldridge@voidlinux.org>"
license="Apache-2.0"
homepage="https://grafana.com/oss/loki/"
distfiles="https://github.com/grafana/loki/archive/v$version.tar.gz"
checksum=480994460326bf3a3723713e7385d8f02b16f00f7fc1db8ee374f7ffe496e6ba

pre_configure() {
	go get github.com/grafana/pyroscope-go/godeltaprof@v0.1.8
	go mod vendor
}
